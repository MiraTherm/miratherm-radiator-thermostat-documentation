%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% LICENSE NOTICE (CC BY 4.0)
%
% Author/Creator: Alexander Menzel
% Copyright: 2025 MiraTherm
%
% This work is licensed under the Creative Commons Attribution 4.0 International License.
% License Text (URI): https://creativecommons.org/licenses/by/4.0/
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Concept}
\label{chap:Concept}
In this chapter, the overall concept and approach for the development of the radiator thermostat software is described. Additionally, the required hardware for development and testing is outlined.

\section{Solution Approach}
\label{sec:Solution Approach}
In this project, a basic software for a device prototype should be implemented including hardware drivers and general program logic. The description of the eQ-3 eqiva Bluetooth from \cite{eQ3AG.05.2018} will be used as a reference for defining the functional scope of the software to be developed. 

Due to time constraints, the implementation of control algorithms, wireless connectivity, advanced features, and energy management will be considered out of scope for this project. Instead, the focus will be on developing a solid software foundation that can be extended in the future.

The software should be designed ready for prospective integration of the control algorithms and Matter-over-Thread standard. (For further details about this standard see \cite{enwiki:matter}.) The device is supposed to be used for smart home applications, specifically for the integration of the thermostat in Home Assistant, apps like Google Home and/or custom \acp{api}.

\section{Required Hardware}
\label{sec:Required Hardware}

To ensure a degree of independence from the \acs{pcb} design and mechanics, the software will be developed using a prototype hardware set that resembles the thermostat in terms of components and interfaces. This approach enables early software development and testing before all hardware of the thermostat is available.

A block diagram of the prototype hardware for software development and testing is shown in Figure \ref{fig:mt-rt-sw-dev-hw-block-diagram}. The following components are required:

\begin{itemize}
    \item \textbf{P-NUCLEO-WB55} - \acs{mcu} development board with Matter-over-Thread standard support
    \item \textbf{eQ-3 eqiva Model N} - Radiator thermostat for disassembly and reuse of its C300 $3\unit{V}$ motor, gear box and valve connector
    \item \textbf{DRV8833} - Motor driver module
    \item \textbf{Shunt resistor} - $1 \unit{Î©}$ shunt resistor for current measurement of the motor
    \item \textbf{$\mathbf{1.3\unit{"}}$ $\mathbf{128\times 64}$ \ac{oled} Display incl. SH1106} - Display with an embedded driver
    \item \textbf{KY-040} - Rotary encoder
    \item \textbf{Connecting wires}
    \item \textbf{Breadboard(s)}
    \item \textbf{Power supply} - laboratory power supply or batteries
\end{itemize}

\begin{figure}[htbp]
    \centering
    \includegraphics[width=1.0\textwidth]{../../electronics/diagrams/mt-rt-sw-dev-hw-block-diagram.png}
    \caption{Block diagram of the prototype hardware for software development and testing}
    \label{fig:mt-rt-sw-dev-hw-block-diagram}
\end{figure}
